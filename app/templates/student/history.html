<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>表情发送历史</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap-4.1.3-dist/css/bootstrap.min.css') }}">

    <style>
        .history-container {
            margin-top: 40px;
        }
    </style>
</head>

<body class="app header-fixed sidebar-fixed aside-menu-fixed sidebar-lg-show">

<header class="app-header navbar">
    <span class="badge badge-light">软件工程实践 Lab</span>
    <div class="col-sm-6 text-right">
        <a href="{{ url_for('student_courses') }}" class="btn btn-outline-secondary btn-sm right-top-btn" style="position:absolute; right:20px; top:15px;">
            返回课程
        </a>
    </div>
</header>

<div class="app-body">
    <main class="main">
        <div class="container">
            <div class="animated fadeIn">

                <h2 class="mt-4">我的表情历史</h2>

                <!-- Flash 消息 -->
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        <br>
                        {% for category, message in messages %}
                            <div class="alert alert-{{ category }}">{{ message }}</div>
                        {% endfor %}
                    {% endif %}
                {% endwith %}

                <div class="history-container">
                    <table class="table table-bordered table-hover">
                        <thead class="thead-light">
                            <tr>
                                <th>课程</th>
                                <th>表情</th>
                                <th>时间</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for e in history %}
                            {% if 1 <= e.type <= 10 %}
                            <tr>
                                <td>{{ e.course_id }}</td>
                                <td>
                                    <img src="{{ url_for('static', filename='emoji/' ~ e.type ~ '.png') }}"
                                        alt="emoji"
                                        width="28" height="28">
                                </td>
                                <td>{{ e.time.strftime("%Y-%m-%d %H:%M:%S") }}</td>
                                <td>
                                    <a href="{{ url_for('delete_emoji', emoji_id=e.id) }}"
                                       class="btn btn-danger btn-sm"
                                       onclick="return confirm('确定删除该表情吗？')">
                                       删除
                                    </a>
                                </td>

                            </tr>
                            {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </main>
</div>

</body>
</html>
